# AutomaÃ§Ã£o de tarefas: Liberando meu tempo com Shell Script ğŸ¤–â³

Uma das melhores partes do Shell Script Ã© a capacidade de automatizar tarefas repetitivas. ğŸš€ Imagine que vocÃª tem que fazer backups, mover arquivos ou atÃ© mesmo configurar servidores manualmente todos os dias â€” que tal criar scripts que fazem tudo isso por vocÃª enquanto vocÃª toma um cafÃ©? â˜• Vamos aprender como criar scripts que automatizam o trabalho e deixam a sua vida mais fÃ¡cil!

## Por Que AutomaÃ§Ã£o? ğŸ¤”

Automatizar tarefas Ã© a chave para:

1. **Economizar tempo**: Tarefas repetitivas se tornam automÃ¡ticas.
2. **Reduzir erros humanos**: Menos intervenÃ§Ãµes manuais significam menos chances de erro.
3. **Melhorar a eficiÃªncia**: Seu script pode executar as tarefas mais rÃ¡pido do que se vocÃª fizesse tudo manualmente.
4. **Escalabilidade**: Facilita a execuÃ§Ã£o de tarefas em larga escala.

---

## Agendando Tarefas com `cron` ğŸ•’

O **`cron`** Ã© um agendador de tarefas que permite executar scripts automaticamente em intervalos de tempo definidos. Se vocÃª quer que seu script rode diariamente, semanalmente ou em horÃ¡rios especÃ­ficos, `cron` Ã© seu aliado! ğŸ˜„

### Sintaxe do `crontab`

A sintaxe bÃ¡sica de um agendamento no `cron` Ã©:

```
* * * * * /caminho/para/o/script.sh
```

Os primeiros cinco asteriscos definem o **tempo de execuÃ§Ã£o** da tarefa:

1. Minuto (0-59)
2. Hora (0-23)
3. Dia do mÃªs (1-31)
4. MÃªs (1-12)
5. Dia da semana (0-6, sendo 0 = domingo)

### Exemplo: Rodar um Script Todos os Dias Ã s 22h

```bash
0 22 * * * /home/usuario/backup.sh
```

Esse agendamento executa o script `backup.sh` todos os dias Ã s 22h.

### Exemplo: Rodar a Cada 10 Minutos

```bash
*/10 * * * * /home/usuario/limpar_logs.sh
```

Isso executa o script `limpar_logs.sh` a cada 10 minutos.

---

## Automatizando Backups DiÃ¡rios com `cron` ğŸ’¾

Agora que jÃ¡ entendemos o `cron`, vamos criar um exemplo prÃ¡tico para agendar backups diÃ¡rios de um diretÃ³rio importante.

### Script de Backup: `backup.sh`

```bash
#!/bin/bash

origem="/home/usuario/documentos"
destino="/home/usuario/backups/$(date +%F).tar.gz"

echo "Iniciando backup de $origem para $destino..."
tar -czf "$destino" "$origem"
echo "Backup concluÃ­do com sucesso!"
```

### Agendamento do Backup com `cron`

```bash
0 2 * * * /home/usuario/backup.sh
```

Esse agendamento garante que o backup serÃ¡ feito todos os dias Ã s 2h da manhÃ£, criando um arquivo compactado com a data no nome.

---

## Usando `while` para Tarefas de AutomaÃ§Ã£o ContÃ­nua ğŸ”„

AlÃ©m de `cron`, podemos criar loops com `while` para tarefas que precisam rodar continuamente. Vamos supor que vocÃª quer monitorar o uso de espaÃ§o em disco a cada minuto e receber alertas se o disco estiver cheio.

### Exemplo: Monitoramento de EspaÃ§o em Disco ğŸ“Š

```bash
#!/bin/bash

while true; do
    uso_disco=$(df / | grep / | awk '{ print $5 }' | sed 's/%//g')

    if [ "$uso_disco" -gt 90 ]; then
        echo "Alerta: EspaÃ§o em disco acima de 90%!"
    fi

    sleep 60  # Espera por 1 minuto antes de verificar novamente
done
```

Esse script verifica o uso do disco a cada minuto e exibe um alerta se o uso estiver acima de 90%. O loop `while true` faz com que ele rode continuamente.

---

## Enviando E-mails Automaticamente ğŸ“§

VocÃª pode automatizar o envio de e-mails para relatÃ³rios ou notificaÃ§Ãµes de tarefas usando o comando `mail`. Por exemplo, apÃ³s um backup, vocÃª pode enviar um e-mail informando se ele foi bem-sucedido.

### Exemplo: Enviando um E-mail ApÃ³s um Backup ğŸ“¬

```bash
#!/bin/bash

origem="/home/usuario/documentos"
destino="/home/usuario/backups/$(date +%F).tar.gz"

# Fazendo o backup
tar -czf "$destino" "$origem"

# Enviando o e-mail de sucesso
echo "O backup de $origem foi concluÃ­do com sucesso!" | mail -s "Backup ConcluÃ­do" seuemail@exemplo.com
```

Esse script faz o backup e envia um e-mail informando que o processo foi concluÃ­do.

---

## Automatizando Limpeza de Arquivos Antigos ğŸ§¹

Vamos supor que vocÃª estÃ¡ fazendo backups diÃ¡rios e quer manter apenas os Ãºltimos 7 dias de backups. Podemos automatizar a **limpeza de arquivos antigos** usando o comando `find` para deletar backups mais antigos.

### Exemplo: Script de Limpeza de Backups Antigos ğŸ—‘ï¸

```bash
#!/bin/bash

# DiretÃ³rio de backups
diretorio_backups="/home/usuario/backups"

# Apaga backups mais antigos que 7 dias
find "$diretorio_backups" -type f -mtime +7 -exec rm {} \;

echo "Limpeza de backups antigos concluÃ­da!"
```

Esse script usa o comando `find` para procurar e apagar arquivos no diretÃ³rio de backups que tenham mais de 7 dias de idade.

---

## Exemplo Completo: Automatizando Backup e Limpeza ğŸ› ï¸ğŸ’¾

Agora vamos combinar todos esses conceitos em um Ãºnico processo automatizado com `cron`, onde fazemos backup diariamente, enviamos um e-mail de confirmaÃ§Ã£o e limpamos backups antigos automaticamente.

### Script de AutomaÃ§Ã£o Completa: `automacao_backup.sh`

```bash
#!/bin/bash
set -e

# DiretÃ³rios de origem e destino
origem="/home/usuario/documentos"
destino="/home/usuario/backups/$(date +%F).tar.gz"
email="seuemail@exemplo.com"

# Fazendo o backup
echo "Iniciando backup de $origem para $destino..."
tar -czf "$destino" "$origem"

# Enviando e-mail de sucesso
echo "Backup concluÃ­do com sucesso!" | mail -s "Backup ConcluÃ­do" "$email"

# Limpando backups antigos
echo "Limpando backups com mais de 7 dias..."
find "/home/usuario/backups" -type f -mtime +7 -exec rm {} \;

echo "AutomaÃ§Ã£o de backup e limpeza concluÃ­da!"
```

### Agendamento com `cron` para AutomaÃ§Ã£o

```bash
0 3 * * * /home/usuario/automacao_backup.sh
```

Esse agendamento roda o script todos os dias Ã s 3h da manhÃ£, criando backups, enviando e-mails de confirmaÃ§Ã£o e limpando backups antigos automaticamente.

---

## Analogias do Dia a Dia ğŸ”„ğŸ¤–

Pense na **automaÃ§Ã£o de tarefas** como uma cafeteira programÃ¡vel. â˜• Ao invÃ©s de preparar seu cafÃ© manualmente todas as manhÃ£s, vocÃª programa a cafeteira na noite anterior. De manhÃ£, vocÃª acorda e o cafÃ© estÃ¡ pronto! No Shell Script, a automaÃ§Ã£o faz exatamente isso: ela "acorda" e executa tarefas por vocÃª, seja backup, monitoramento ou limpeza de arquivos, tudo enquanto vocÃª relaxa! ğŸ˜

---

## ConclusÃ£o ğŸ‰

Com o poder da automaÃ§Ã£o, vocÃª pode criar scripts que trabalham para vocÃª enquanto vocÃª se concentra em tarefas mais importantes! ğŸš€ Usando `cron`, loops contÃ­nuos, envio de e-mails e limpeza de arquivos antigos, vocÃª pode automatizar praticamente qualquer tarefa repetitiva no seu sistema. Com essas ferramentas, vocÃª se tornarÃ¡ um verdadeiro mestre da automaÃ§Ã£o de Shell Script! ğŸ¤–ğŸ’»