# VariÃ¡veis no Shell: A caixa de ferramentas ğŸ§°

JÃ¡ tentou construir algo sem ferramentas? ğŸ› ï¸ No mundo dos scripts, **variÃ¡veis** sÃ£o como suas ferramentas essenciais. Elas armazenam valores que podem ser usados e manipulados ao longo do script. Vamos mergulhar nesse universo e descobrir como as variÃ¡veis podem tornar seus scripts mais poderosos! ğŸ’ª

## O Que SÃ£o VariÃ¡veis? ğŸ¤”

Em termos simples, uma variÃ¡vel Ã© um espaÃ§o na memÃ³ria onde vocÃª pode armazenar dados. No Shell Script, as variÃ¡veis sÃ£o usadas para guardar informaÃ§Ãµes que podem ser referenciadas e manipuladas posteriormente.

Pense nelas como caixas etiquetadas onde vocÃª guarda itens para usar mais tarde. ğŸ“¦

## Declarando VariÃ¡veis ğŸ·ï¸

Declarar uma variÃ¡vel no shell Ã© super simples! Basta escolher um nome e atribuir um valor.

```bash
#!/bin/bash

nome="Alice"
idade=30
```

**ObservaÃ§Ãµes importantes:**

- NÃ£o use espaÃ§os antes ou depois do `=`. ğŸš«
  - **Correto:** `nome="Alice"`
  - **Incorreto:** `nome = "Alice"`
- Nomes de variÃ¡veis diferenciam maiÃºsculas de minÃºsculas. `NOME` e `nome` sÃ£o variÃ¡veis diferentes. ğŸ” 

## Usando VariÃ¡veis ğŸ“

Para usar o valor armazenado em uma variÃ¡vel, preceda o nome dela com `$`.

```bash
echo "OlÃ¡, $nome! VocÃª tem $idade anos."
```

SaÃ­da:

```
OlÃ¡, Alice! VocÃª tem 30 anos.
```

### Colchetes Chave `{}` ğŸ”‘

Para evitar ambiguidades, especialmente quando concatenando, use chaves `{}` em torno do nome da variÃ¡vel.

```bash
arquivo="relatorio"
echo "Gerando ${arquivo}_2023.txt"
```

SaÃ­da:

```
Gerando relatorio_2023.txt
```

## Tipos de VariÃ¡veis ğŸ¨

No Shell Script, todas as variÃ¡veis sÃ£o tratadas como strings por padrÃ£o. Mas nÃ£o se preocupe, podemos realizar operaÃ§Ãµes numÃ©ricas tambÃ©m! ğŸ”¢

### VariÃ¡veis NumÃ©ricas

Para realizar operaÃ§Ãµes matemÃ¡ticas, use o comando `let`, `(( ))` ou `expr`.

```bash
# Usando let
let "a = 5 + 3"

# Usando (( ))
b=$((5 + 3))

# Usando expr
c=$(expr 5 + 3)

echo "a=$a, b=$b, c=$c"
```

SaÃ­da:

```
a=8, b=8, c=8
```

## VariÃ¡veis de Ambiente ğŸŒ

SÃ£o variÃ¡veis disponÃ­veis globalmente no sistema e podem ser acessadas por qualquer script ou processo. Alguns exemplos comuns:

- `$HOME` ğŸ  - DiretÃ³rio home do usuÃ¡rio.
- `$PATH` ğŸš¶â€â™‚ï¸ - DiretÃ³rios onde o shell procura por executÃ¡veis.
- `$USER` ğŸ‘¤ - Nome do usuÃ¡rio atual.
- `$PWD` ğŸ“‚ - DiretÃ³rio de trabalho atual.

Exemplo:

```bash
echo "UsuÃ¡rio atual: $USER"
echo "DiretÃ³rio home: $HOME"
```

## VariÃ¡veis Especiais â­

O Shell Script fornece variÃ¡veis especiais que sÃ£o Ãºteis em scripts.

- `$0` - Nome do script.
- `$1` a `$9` - ParÃ¢metros passados para o script.
- `$#` - NÃºmero de parÃ¢metros.
- `$@` - Todos os parÃ¢metros.
- `$$` - ID do processo do script.
- `$?` - CÃ³digo de saÃ­da do Ãºltimo comando.

Exemplo:

```bash
#!/bin/bash

echo "Nome do script: $0"
echo "Primeiro parÃ¢metro: $1"
echo "Total de parÃ¢metros: $#"
```

Execute o script:

```bash
./meu_script.sh parametro1
```

SaÃ­da:

```
Nome do script: ./meu_script.sh
Primeiro parÃ¢metro: parametro1
Total de parÃ¢metros: 1
```

## Escopo de VariÃ¡veis ğŸ”’

### VariÃ¡veis Locais e Globais

Por padrÃ£o, as variÃ¡veis sÃ£o globais ao script. Se vocÃª definir uma variÃ¡vel dentro de uma funÃ§Ã£o, ela ainda serÃ¡ acessÃ­vel fora dela.

Para tornar uma variÃ¡vel local a uma funÃ§Ã£o, use a palavra-chave `local`.

```bash
#!/bin/bash

minha_funcao() {
    local var_local="Sou local"
    var_global="Sou global"
}

minha_funcao

echo "$var_local"    # NÃ£o serÃ¡ exibido
echo "$var_global"   # SerÃ¡ exibido
```

SaÃ­da:

```
Sou global
```

## Exemplo PrÃ¡tico: Contador de Arquivos ğŸ“‚ğŸ”¢

Vamos criar um script que conta quantos arquivos existem em um diretÃ³rio.

```bash
#!/bin/bash

diretorio="$1"  # O diretÃ³rio Ã© passado como parÃ¢metro

if [ -d "$diretorio" ]; then
    qtd_arquivos=$(ls -1 "$diretorio" | wc -l)
    echo "O diretÃ³rio $diretorio contÃ©m $qtd_arquivos arquivos."
else
    echo "O diretÃ³rio $diretorio nÃ£o existe."
fi
```

Execute:

```bash
./contador.sh /home/user/documentos
```

SaÃ­da:

```
O diretÃ³rio /home/user/documentos contÃ©m 42 arquivos.
```

## Dicas e Truques ğŸ§™â€â™‚ï¸

- **Nomes Descritivos**: Use nomes de variÃ¡veis que faÃ§am sentido. Evite `a`, `b`, `c`... Prefira `contador`, `nome_arquivo`, etc. ğŸ·ï¸
- **Aspas**: Sempre que usar variÃ¡veis que podem conter espaÃ§os ou caracteres especiais, coloque-as entre aspas. `"$variavel"` ğŸ“Œ
- **Exportando VariÃ¡veis**: Use `export` para tornar uma variÃ¡vel disponÃ­vel para scripts ou processos filhos.

```bash
export minha_variavel="Valor exportado"
```

## Analogias do Dia a Dia ğŸ›ï¸

Imagine que vocÃª estÃ¡ fazendo compras e tem uma lista de itens. Cada item Ã© como uma variÃ¡vel que vocÃª precisa para completar sua tarefa (as compras!). Sem a lista (variÃ¡veis), vocÃª pode esquecer algo importante. ğŸ“ğŸ›’

## ConclusÃ£o ğŸ‰

VariÃ¡veis sÃ£o fundamentais para tornar seus scripts dinÃ¢micos e flexÃ­veis. Elas permitem armazenar e manipular dados, interagir com o usuÃ¡rio e controlar o fluxo do script. Com uma boa compreensÃ£o das variÃ¡veis, vocÃª terÃ¡ uma poderosa ferramenta Ã  sua disposiÃ§Ã£o! âš¡
